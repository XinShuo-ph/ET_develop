/*@@
   @file    Formaline_Parameters.c
   @author  Automatically generated by CreateParameterBindings.pl
   @desc
            Creates/extends parameters for this thorn
   @enddesc
 @@*/


#include <stdio.h>
#include <stdlib.h>
#include <stdarg.h>

#include "cctk_Config.h"
#include "cctk_Constants.h"
#include "ParameterBindings.h"
#include "CParameterStructNames.h"
#include "ParameterCRestrictedIO.h"

/* structure containing all private parameters of thorn Formaline */
struct
{
  CCTK_REAL update_interval;
  const char * out_reductions;
  const char * out_vars;
  const char * output_source_subdirectory;
  const char * portal_hostname[5];
  const char * portal_username;
  const char * rdf_hostname[5];
  const char * relay_host;
  const char * steered_parameters_log_exclusion_list;
  const char * storage_filename;
  const char * storage_json_filename;
  CCTK_INT announce_to_portal;
  CCTK_INT collect_metadata;
  CCTK_INT create_id_files;
  CCTK_INT max_warn_level;
  CCTK_INT metadata_lifetime;
  CCTK_INT nr_of_parameter_changes_to_be_logged;
  CCTK_INT output_info;
  CCTK_INT output_source;
  CCTK_INT portal_port[5];
  CCTK_INT publish_level;
  CCTK_INT rdf_port[5];
  CCTK_INT send_as_rdf;
  CCTK_INT store_into_file;
  CCTK_INT store_into_json_file;
  CCTK_INT timeout;
  CCTK_INT use_relay_host;
  CCTK_INT verbose;
} PRIVATE_FORMALINE_STRUCT;


/* structure containing all restricted parameters of thorn Formaline */
struct
{
  int dummy_parameter;
} RESTRICTED_FORMALINE_STRUCT;


int CCTKi_BindingsCreateFormalineParameters(void);
int CCTKi_BindingsCreateFormalineParameters(void)
{
  CCTKi_ParameterCreate("announce_to_portal",
                        "Formaline",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Announce meta information to the portal",
                        "no",
                        &(PRIVATE_FORMALINE_STRUCT.announce_to_portal),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("collect_metadata",
                        "Formaline",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Collect metadata and output it in various ways",
                        "yes",
                        &(PRIVATE_FORMALINE_STRUCT.collect_metadata),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("create_id_files",
                        "Formaline",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Create files from the build and job ids",
                        "yes",
                        &(PRIVATE_FORMALINE_STRUCT.create_id_files),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("max_warn_level",
                        "Formaline",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Only output warnings with at most this level of severity",
                        "-1",
                        &(PRIVATE_FORMALINE_STRUCT.max_warn_level),
                        0,
                        NULL,
                        1,
                        "-1:*", "");

  CCTKi_ParameterCreate("metadata_lifetime",
                        "Formaline",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Lifetime of meta information sent to a server (in hours)",
                        "100",
                        &(PRIVATE_FORMALINE_STRUCT.metadata_lifetime),
                        0,
                        NULL,
                        2,
                        "0", "zero to store the metadata forever",
                        "1:*", "a positive value to limit the lifetime to so many hours");

  CCTKi_ParameterCreate("nr_of_parameter_changes_to_be_logged",
                        "Formaline",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "number of parameter changes to be logged",
                        "-1",
                        &(PRIVATE_FORMALINE_STRUCT.nr_of_parameter_changes_to_be_logged),
                        0,
                        NULL,
                        3,
                        "-1:", "log all changes",
                        "0:", "no logs please",
                        "1:*", "log this many changes for a given parameter, then stop logging");

  CCTKi_ParameterCreate("out_reductions",
                        "Formaline",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Reduction operators that should be applied to the output variables",
                        "minimum maximum norm1 norm2 norm_inf sum",
                        &(PRIVATE_FORMALINE_STRUCT.out_reductions),
                        0,
                        NULL,
                        1,
                        "", "space separated list of reduction operators");

  CCTKi_ParameterCreate("out_vars",
                        "Formaline",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Cactus variables that should be output",
                        "",
                        &(PRIVATE_FORMALINE_STRUCT.out_vars),
                        0,
                        NULL,
                        1,
                        "", "space separated list of groups or variables");

  CCTKi_ParameterCreate("output_info",
                        "Formaline",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Output info messages?",
                        "no",
                        &(PRIVATE_FORMALINE_STRUCT.output_info),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("output_source",
                        "Formaline",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Output a tarball with the cactus source tree",
                        "yes",
                        &(PRIVATE_FORMALINE_STRUCT.output_source),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("output_source_subdirectory",
                        "Formaline",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Subdirectory, relative to IO::out_dir, for the Cactus source tarballs",
                        "cactus-source",
                        &(PRIVATE_FORMALINE_STRUCT.output_source_subdirectory),
                        0,
                        NULL,
                        1,
                        "", "");

  CCTKi_ParameterCreate("portal_hostname",
                        "Formaline",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Portal host name",
                        "",
                        (PRIVATE_FORMALINE_STRUCT.portal_hostname),
                        5,
                        NULL,
                        1,
                        "", "");

  CCTKi_ParameterCreate("portal_port",
                        "Formaline",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Portal port",
                        "9296",
                        (PRIVATE_FORMALINE_STRUCT.portal_port),
                        5,
                        NULL,
                        1,
                        "1:65535", "");

  CCTKi_ParameterCreate("portal_username",
                        "Formaline",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "User name on the portal",
                        "",
                        &(PRIVATE_FORMALINE_STRUCT.portal_username),
                        0,
                        NULL,
                        1,
                        "", "");

  CCTKi_ParameterCreate("publish_level",
                        "Formaline",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Importance level for meta data to be published via the Publish API",
                        "1",
                        &(PRIVATE_FORMALINE_STRUCT.publish_level),
                        0,
                        NULL,
                        1,
                        "0:10", "the lower the level the more important the meta data to be published");

  CCTKi_ParameterCreate("rdf_hostname",
                        "Formaline",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "RDF server host name",
                        "",
                        (PRIVATE_FORMALINE_STRUCT.rdf_hostname),
                        5,
                        NULL,
                        1,
                        "", "");

  CCTKi_ParameterCreate("rdf_port",
                        "Formaline",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "RDF server port",
                        "9296",
                        (PRIVATE_FORMALINE_STRUCT.rdf_port),
                        5,
                        NULL,
                        1,
                        "1:65535", "");

  CCTKi_ParameterCreate("relay_host",
                        "Formaline",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Relay host for connecting to the portal",
                        "",
                        &(PRIVATE_FORMALINE_STRUCT.relay_host),
                        0,
                        NULL,
                        2,
                        ".+", "host name",
                        "", "try to determine a relay host automatically");

  CCTKi_ParameterCreate("send_as_rdf",
                        "Formaline",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Send meta as RDF to a server",
                        "no",
                        &(PRIVATE_FORMALINE_STRUCT.send_as_rdf),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("steered_parameters_log_exclusion_list",
                        "Formaline",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Parameters for which runtime changes should not be logged",
                        "CarpetRegrid::coordinates",
                        &(PRIVATE_FORMALINE_STRUCT.steered_parameters_log_exclusion_list),
                        0,
                        NULL,
                        1,
                        "", "whitespace-separated list of parameter names");

  CCTKi_ParameterCreate("storage_filename",
                        "Formaline",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "File name for meta information",
                        "formaline-jar.txt",
                        &(PRIVATE_FORMALINE_STRUCT.storage_filename),
                        0,
                        NULL,
                        1,
                        "", "");

  CCTKi_ParameterCreate("storage_json_filename",
                        "Formaline",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "File name for meta information in JSON format",
                        "formaline-jar.json",
                        &(PRIVATE_FORMALINE_STRUCT.storage_json_filename),
                        0,
                        NULL,
                        1,
                        "", "");

  CCTKi_ParameterCreate("store_into_file",
                        "Formaline",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Store meta information in a file",
                        "yes",
                        &(PRIVATE_FORMALINE_STRUCT.store_into_file),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("store_into_json_file",
                        "Formaline",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Store meta information in a file in JSON format",
                        "yes",
                        &(PRIVATE_FORMALINE_STRUCT.store_into_json_file),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("timeout",
                        "Formaline",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Timeout for sending meta information to a server (in seconds)",
                        "10",
                        &(PRIVATE_FORMALINE_STRUCT.timeout),
                        0,
                        NULL,
                        1,
                        "1:*", "a positive value");

  CCTKi_ParameterCreate("update_interval",
                        "Formaline",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Update interval for the meta information (in seconds)",
                        "3600.0",
                        &(PRIVATE_FORMALINE_STRUCT.update_interval),
                        0,
                        NULL,
                        1,
                        "0:*", "");

  CCTKi_ParameterCreate("use_relay_host",
                        "Formaline",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Use a relay host for connecting to the portal",
                        "yes",
                        &(PRIVATE_FORMALINE_STRUCT.use_relay_host),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("verbose",
                        "Formaline",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Produce screen output",
                        "no",
                        &(PRIVATE_FORMALINE_STRUCT.verbose),
                        0,
                        NULL,
                        0);

  return 0;
}

int CCTKi_BindingsFormalineParameterExtensions(void);
int CCTKi_BindingsFormalineParameterExtensions(void)
{
  return 0;
}

