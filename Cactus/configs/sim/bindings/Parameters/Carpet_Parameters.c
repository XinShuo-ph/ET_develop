/*@@
   @file    Carpet_Parameters.c
   @author  Automatically generated by CreateParameterBindings.pl
   @desc
            Creates/extends parameters for this thorn
   @enddesc
 @@*/


#include <stdio.h>
#include <stdlib.h>
#include <stdarg.h>

#include "cctk_Config.h"
#include "cctk_Constants.h"
#include "ParameterBindings.h"
#include "CParameterStructNames.h"
#include "ParameterCRestrictedCACTUS.h"
#include "ParameterCRestrictedCARPETLIB.h"
#include "ParameterCRestrictedINITBASE.h"
#include "ParameterCRestrictedIO.h"

/* structure containing all private parameters of thorn Carpet */
struct
{
  CCTK_REAL aspect_ratio_x;
  CCTK_REAL aspect_ratio_y;
  CCTK_REAL aspect_ratio_z;
  CCTK_REAL ghost_zone_cost;
  CCTK_REAL maximum_imbalance;
  CCTK_REAL timing_average_window_minutes;
  const char * base_extents;
  const char * base_outerbounds;
  const char * eno_interpolation_type;
  const char * ghost_sizes;
  const char * grid_coordinates_filename;
  const char * grid_structure_filename;
  const char * model;
  const char * processor_topology;
  const char * prolongation_orders_space;
  const char * refinement_centering;
  const char * space_refinement_factors;
  const char * time_refinement_factors;
  const char * timer_file;
  CCTK_INT adaptive_stepsize;
  CCTK_INT additional_buffer_zones;
  CCTK_INT additional_overlap_zones;
  CCTK_INT barriers;
  CCTK_INT check_for_poison;
  CCTK_INT checksum_timelevels;
  CCTK_INT constant_load_per_processor;
  CCTK_INT convergence_factor;
  CCTK_INT convergence_level;
  CCTK_INT domain_from_coordbase;
  CCTK_INT domain_from_multipatch;
  CCTK_INT enable_all_storage;
  CCTK_INT enable_no_storage;
  CCTK_INT ghost_size;
  CCTK_INT ghost_size_x;
  CCTK_INT ghost_size_y;
  CCTK_INT ghost_size_z;
  CCTK_INT global_nsize;
  CCTK_INT global_nx;
  CCTK_INT global_ny;
  CCTK_INT global_nz;
  CCTK_INT granularity;
  CCTK_INT granularity_boundary;
  CCTK_INT include_local_mode_in_mode_timer_tree;
  CCTK_INT include_maps_in_mode_timer_tree;
  CCTK_INT init_3_timelevels;
  CCTK_INT init_each_timelevel;
  CCTK_INT init_fill_timelevels;
  CCTK_INT max_poison_locations;
  CCTK_INT max_refinement_levels;
  CCTK_INT max_timelevels;
  CCTK_INT min_points_per_proc;
  CCTK_INT no_split_direction;
  CCTK_INT num_convergence_levels;
  CCTK_INT num_integrator_substeps;
  CCTK_INT num_maps;
  CCTK_INT num_threads;
  CCTK_INT output_after_regridding;
  CCTK_INT output_initialise_timer_tree;
  CCTK_INT output_internal_data;
  CCTK_INT output_timer_tree_every;
  CCTK_INT output_timers_every;
  CCTK_INT output_xml_timer_tree;
  CCTK_INT poison_new_timelevels;
  CCTK_INT poison_value;
  CCTK_INT print_grid_info;
  CCTK_INT print_timestats_every;
  CCTK_INT processor_topology_3d_x;
  CCTK_INT processor_topology_3d_y;
  CCTK_INT processor_topology_3d_z;
  CCTK_INT prolongate_initial_data;
  CCTK_INT prolongation_order_space;
  CCTK_INT prolongation_order_time;
  CCTK_INT recompose_verbose;
  CCTK_INT refine_timestep;
  CCTK_INT refinement_factor;
  CCTK_INT regrid_during_initialisation;
  CCTK_INT regrid_during_recovery;
  CCTK_INT regrid_in_level_mode;
  CCTK_INT same_number_of_components_on_each_process;
  CCTK_INT schedule_barriers;
  CCTK_INT set_cpu_affinity;
  CCTK_INT split_components;
  CCTK_INT split_direction;
  CCTK_INT storage_verbose;
  CCTK_INT suppress_restriction;
  CCTK_INT sync_barriers;
  CCTK_INT sync_during_time_integration;
  CCTK_INT time_interpolation_during_regridding;
  CCTK_INT use_buffer_zones;
  CCTK_INT use_overlap_zones;
  CCTK_INT use_tapered_grids;
  CCTK_INT use_unusedpoints_mask;
  CCTK_INT verbose;
  CCTK_INT veryverbose;
} PRIVATE_CARPET_STRUCT;


/* structure containing all restricted parameters of thorn Carpet */
struct
{
  CCTK_INT periodic;
  CCTK_INT periodic_x;
  CCTK_INT periodic_y;
  CCTK_INT periodic_z;
} RESTRICTED_DRIVER_STRUCT;


int CCTKi_BindingsCreateCarpetParameters(void);
int CCTKi_BindingsCreateCarpetParameters(void)
{
  CCTKi_ParameterCreate("periodic",
                        "Carpet",
                        "BOOLEAN",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "do not use this parameter",
                        "no",
                        &(RESTRICTED_DRIVER_STRUCT.periodic),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("periodic_x",
                        "Carpet",
                        "BOOLEAN",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "do not use this parameter",
                        "yes",
                        &(RESTRICTED_DRIVER_STRUCT.periodic_x),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("periodic_y",
                        "Carpet",
                        "BOOLEAN",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "do not use this parameter",
                        "yes",
                        &(RESTRICTED_DRIVER_STRUCT.periodic_y),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("periodic_z",
                        "Carpet",
                        "BOOLEAN",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "do not use this parameter",
                        "yes",
                        &(RESTRICTED_DRIVER_STRUCT.periodic_z),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("adaptive_stepsize",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Allow adaptive timestep sizes",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.adaptive_stepsize),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("additional_buffer_zones",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Additional buffer zones",
                        "0",
                        &(PRIVATE_CARPET_STRUCT.additional_buffer_zones),
                        0,
                        NULL,
                        1,
                        "*:*", "");

  CCTKi_ParameterCreate("additional_overlap_zones",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Additional overlap zones",
                        "0",
                        &(PRIVATE_CARPET_STRUCT.additional_overlap_zones),
                        0,
                        NULL,
                        1,
                        "*:*", "");

  CCTKi_ParameterCreate("aspect_ratio_x",
                        "Carpet",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Desired aspect ratio for each processor's domain",
                        "1.0",
                        &(PRIVATE_CARPET_STRUCT.aspect_ratio_x),
                        0,
                        NULL,
                        1,
                        "(0:*", "");

  CCTKi_ParameterCreate("aspect_ratio_y",
                        "Carpet",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Desired aspect ratio for each processor's domain",
                        "1.0",
                        &(PRIVATE_CARPET_STRUCT.aspect_ratio_y),
                        0,
                        NULL,
                        1,
                        "(0:*", "");

  CCTKi_ParameterCreate("aspect_ratio_z",
                        "Carpet",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Desired aspect ratio for each processor's domain",
                        "1.0",
                        &(PRIVATE_CARPET_STRUCT.aspect_ratio_z),
                        0,
                        NULL,
                        1,
                        "(0:*", "");

  CCTKi_ParameterCreate("barriers",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Insert barriers at strategic places for debugging purposes (slows down execution)",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.barriers),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("base_extents",
                        "Carpet",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Extents of base grid components, in grid point units of the finest level",
                        "",
                        &(PRIVATE_CARPET_STRUCT.base_extents),
                        0,
                        NULL,
                        2,
                        "^$", "leave empty for one grid component covering the whole region (default)",
                        "^[[:space:]]*\\[(([[:space:]]*\\([[:space:]]*\\[[[:space:]]*[[:digit:]]+[[:space:]]*,[[:space:]]*[[:digit:]]+[[:space:]]*,[[:space:]]*[[:digit:]]+[[:space:]]*\\][[:space:]]*:[[:space:]]*\\[[[:space:]]*[[:digit:]]+[[:space:]]*,[[:space:]]*[[:digit:]]+[[:space:]]*,[[:space:]]*[[:digit:]]+[[:space:]]*\\][[:space:]]*:[[:space:]]*\\[[[:space:]]*[[:digit:]]+[[:space:]]*,[[:space:]]*[[:digit:]]+[[:space:]]*,[[:space:]]*[[:digit:]]+[[:space:]]*\\][[:space:]]*\\)[[:space:]]*,)*[[:space:]]*\\([[:space:]]*\\[[[:space:]]*[[:digit:]]+[[:space:]]*,[[:space:]]*[[:digit:]]+[[:space:]]*,[[:space:]]*[[:digit:]]+[[:space:]]*\\][[:space:]]*:[[:space:]]*\\[[[:space:]]*[[:digit:]]+[[:space:]]*,[[:space:]]*[[:digit:]]+[[:space:]]*,[[:space:]]*[[:digit:]]+[[:space:]]*\\][[:space:]]*:[[:space:]]*\\[[[:space:]]*[[:digit:]]+[[:space:]]*,[[:space:]]*[[:digit:]]+[[:space:]]*,[[:space:]]*[[:digit:]]+[[:space:]]*\\][[:space:]]*\\))?[[:space:]]*\\][[:space:]]*$", "[ ([<imin>,<jmin>,<kmin>]:[<imax>,<jmax>,<kmax>]:[<istride>,<jstride>,<kstride>]), ... ]");

  CCTKi_ParameterCreate("base_outerbounds",
                        "Carpet",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Outer boundaries of base grid components",
                        "",
                        &(PRIVATE_CARPET_STRUCT.base_outerbounds),
                        0,
                        NULL,
                        2,
                        "^$", "leave empty for using the default, which depends on cctk_gsh",
                        "^[[:space:]]*\\[(([[:space:]]*\\[[[:space:]]*\\[[[:space:]]*[[:digit:]]+[[:space:]]*,[[:space:]]*[[:digit:]]+[[:space:]]*\\][[:space:]]*,[[:space:]]*\\[[[:space:]]*[[:digit:]]+[[:space:]]*,[[:space:]]*[[:digit:]]+[[:space:]]*\\][[:space:]]*,[[:space:]]*\\[[[:space:]]*[[:digit:]]+[[:space:]]*,[[:space:]]*[[:digit:]]+[[:space:]]*\\][[:space:]]*\\][[:space:]]*,)*[[:space:]]*\\[[[:space:]]*\\[[[:space:]]*[[:digit:]]+[[:space:]]*,[[:space:]]*[[:digit:]]+[[:space:]]*\\][[:space:]]*,[[:space:]]*\\[[[:space:]]*[[:digit:]]+[[:space:]]*,[[:space:]]*[[:digit:]]+[[:space:]]*\\][[:space:]]*,[[:space:]]*\\[[[:space:]]*[[:digit:]]+[[:space:]]*,[[:space:]]*[[:digit:]]+[[:space:]]*\\][[:space:]]*\\])?[[:space:]]*\\][[:space:]]*$", "[ [ [<ilower>,<iupper>], [<jlower>,<jupper>], [<klower>,<kupper>] ], ... ]");

  CCTKi_ParameterCreate("check_for_poison",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Explicitely check for the poison value after every time step",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.check_for_poison),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("checksum_timelevels",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Try to catch unintentionally changed timelevels by taking checksums and comparing against these",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.checksum_timelevels),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("constant_load_per_processor",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Keep the load per processor constant -- this is meant for benchmarks",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.constant_load_per_processor),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("convergence_factor",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Multigrid factor",
                        "2",
                        &(PRIVATE_CARPET_STRUCT.convergence_factor),
                        0,
                        NULL,
                        1,
                        "1:*", "must be positive");

  CCTKi_ParameterCreate("convergence_level",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Convergence level",
                        "0",
                        &(PRIVATE_CARPET_STRUCT.convergence_level),
                        0,
                        NULL,
                        1,
                        "*:*", "negative for finer, positive for coarser resolutions");

  CCTKi_ParameterCreate("domain_from_coordbase",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Use the domain description from CoordBase",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.domain_from_coordbase),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("domain_from_multipatch",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Use the domain description from MultiPatch",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.domain_from_multipatch),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("enable_all_storage",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Enable storage for all grid functions",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.enable_all_storage),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("enable_no_storage",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Exit before beginning to enable storage for grid functions",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.enable_no_storage),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("eno_interpolation_type",
                        "Carpet",
                        "KEYWORD",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "What is represented by values in cells DEPRECATED",
                        "samples",
                        &(PRIVATE_CARPET_STRUCT.eno_interpolation_type),
                        0,
                        NULL,
                        1,
                        "samples", "grid values a sample values of the solution");

  CCTKi_ParameterCreate("ghost_size",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Ghost zones in each spatial direction",
                        "-1",
                        &(PRIVATE_CARPET_STRUCT.ghost_size),
                        0,
                        NULL,
                        2,
                        "0:*", "must be nonnegative",
                        "-1", "use the per-dimension parameters");

  CCTKi_ParameterCreate("ghost_size_x",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Ghost zones in x direction",
                        "1",
                        &(PRIVATE_CARPET_STRUCT.ghost_size_x),
                        0,
                        NULL,
                        1,
                        "0:*", "must be nonnegative");

  CCTKi_ParameterCreate("ghost_size_y",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Ghost zones in y direction",
                        "1",
                        &(PRIVATE_CARPET_STRUCT.ghost_size_y),
                        0,
                        NULL,
                        1,
                        "0:*", "must be nonnegative");

  CCTKi_ParameterCreate("ghost_size_z",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Ghost zones in z direction",
                        "1",
                        &(PRIVATE_CARPET_STRUCT.ghost_size_z),
                        0,
                        NULL,
                        1,
                        "0:*", "must be nonnegative");

  CCTKi_ParameterCreate("ghost_sizes",
                        "Carpet",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Number of ghost zones for each refinement level",
                        "",
                        &(PRIVATE_CARPET_STRUCT.ghost_sizes),
                        0,
                        NULL,
                        2,
                        "^$", "Use the value of ghost_size or ghost_size_[xyz]",
                        "^[[:space:]]*\\[[[:space:]]*[[:digit:]]+[[:space:]]*(,[[:space:]]*[[:digit:]]+[[:space:]]*)*\\][[:space:]]*$", "[ <ghost_size>, ... ]");

  CCTKi_ParameterCreate("ghost_zone_cost",
                        "Carpet",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Relative cost of ghost zones for 'recursive' load balancing",
                        "0.025",
                        &(PRIVATE_CARPET_STRUCT.ghost_zone_cost),
                        0,
                        NULL,
                        1,
                        "0:*", "");

  CCTKi_ParameterCreate("global_nsize",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Grid size in each spatial direction",
                        "-1",
                        &(PRIVATE_CARPET_STRUCT.global_nsize),
                        0,
                        NULL,
                        2,
                        "0:*", "must be nonnegative",
                        "-1", "use the per-dimension parameters");

  CCTKi_ParameterCreate("global_nx",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Grid size in x direction",
                        "10",
                        &(PRIVATE_CARPET_STRUCT.global_nx),
                        0,
                        NULL,
                        1,
                        "0:*", "must be nonnegative");

  CCTKi_ParameterCreate("global_ny",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Grid size in y direction",
                        "10",
                        &(PRIVATE_CARPET_STRUCT.global_ny),
                        0,
                        NULL,
                        1,
                        "0:*", "must be nonnegative");

  CCTKi_ParameterCreate("global_nz",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Grid size in z direction",
                        "10",
                        &(PRIVATE_CARPET_STRUCT.global_nz),
                        0,
                        NULL,
                        1,
                        "0:*", "must be nonnegative");

  CCTKi_ParameterCreate("granularity",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "When splitting components, create sizes that are multiples of this granularity",
                        "1",
                        &(PRIVATE_CARPET_STRUCT.granularity),
                        0,
                        NULL,
                        1,
                        "1:*", "TODO: query CoordBase or related thorns for this information");

  CCTKi_ParameterCreate("granularity_boundary",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "When splitting components, assume this many boundary points that don't count towards the granularity",
                        "0",
                        &(PRIVATE_CARPET_STRUCT.granularity_boundary),
                        0,
                        NULL,
                        1,
                        "0:*", "TODO: use CoordBase's number of boundary points for this");

  CCTKi_ParameterCreate("grid_coordinates_filename",
                        "Carpet",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "File name to output grid coordinates to (empty = no output)",
                        "",
                        &(PRIVATE_CARPET_STRUCT.grid_coordinates_filename),
                        0,
                        NULL,
                        1,
                        ".*", "must be a legal file name");

  CCTKi_ParameterCreate("grid_structure_filename",
                        "Carpet",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "File name to output grid structure to (empty = no output)",
                        "",
                        &(PRIVATE_CARPET_STRUCT.grid_structure_filename),
                        0,
                        NULL,
                        1,
                        ".*", "must be a legal file name");

  CCTKi_ParameterCreate("include_local_mode_in_mode_timer_tree",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Include a node for the time spent in local mode in the mode timer tree",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.include_local_mode_in_mode_timer_tree),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("include_maps_in_mode_timer_tree",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Include a breakdown of time spent on different multipatch maps in the mode timer tree",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.include_maps_in_mode_timer_tree),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("init_3_timelevels",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Set up 3 timelevels of initial data",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.init_3_timelevels),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("init_each_timelevel",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Call initial data routines once for each timelevel",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.init_each_timelevel),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("init_fill_timelevels",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Fill past time levels from current time level after calling initial data routines",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.init_fill_timelevels),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("max_poison_locations",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Maximum number of poison locations that are printed to the screen",
                        "10",
                        &(PRIVATE_CARPET_STRUCT.max_poison_locations),
                        0,
                        NULL,
                        2,
                        "-1", "print all locations",
                        "0:*", "print only that many locations");

  CCTKi_ParameterCreate("max_refinement_levels",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Maximum number of refinement levels (including the base level)",
                        "1",
                        &(PRIVATE_CARPET_STRUCT.max_refinement_levels),
                        0,
                        NULL,
                        1,
                        "1:*", "must be positive");

  CCTKi_ParameterCreate("max_timelevels",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Maximum number of time levels (including the current time level)",
                        "-1",
                        &(PRIVATE_CARPET_STRUCT.max_timelevels),
                        0,
                        NULL,
                        2,
                        "-1", "Set automatically to prolonation_order_time+1",
                        "1:*", "Set this explicitly");

  CCTKi_ParameterCreate("maximum_imbalance",
                        "Carpet",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Maximum load imbalance",
                        "0.1",
                        &(PRIVATE_CARPET_STRUCT.maximum_imbalance),
                        0,
                        NULL,
                        1,
                        "(0.0:*", "");

  CCTKi_ParameterCreate("min_points_per_proc",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Minimum number of grid points per processor",
                        "0",
                        &(PRIVATE_CARPET_STRUCT.min_points_per_proc),
                        0,
                        NULL,
                        1,
                        "0:*", "that many");

  CCTKi_ParameterCreate("model",
                        "Carpet",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Model name for multi-model simulations -- the model name is used to distribute the processors onto the models",
                        "world",
                        &(PRIVATE_CARPET_STRUCT.model),
                        0,
                        NULL,
                        1,
                        ".+", "");

  CCTKi_ParameterCreate("no_split_direction",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Direction in which the domain must not be split (for processor_topology=automatic)",
                        "-1",
                        &(PRIVATE_CARPET_STRUCT.no_split_direction),
                        0,
                        NULL,
                        2,
                        "-1", "split in all directions",
                        "0:*", "0 for x, 1 for y, 2 for z, etc.");

  CCTKi_ParameterCreate("num_convergence_levels",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Number of convergence levels (including the base level)",
                        "1",
                        &(PRIVATE_CARPET_STRUCT.num_convergence_levels),
                        0,
                        NULL,
                        1,
                        "1:*", "must be positive");

  CCTKi_ParameterCreate("num_integrator_substeps",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Number of substeps of the time integrator",
                        "-1",
                        &(PRIVATE_CARPET_STRUCT.num_integrator_substeps),
                        0,
                        NULL,
                        2,
                        "-1:", "Call MoLNumIntegratorSubsteps",
                        "0:*", "");

  CCTKi_ParameterCreate("num_maps",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Number of maps",
                        "1",
                        &(PRIVATE_CARPET_STRUCT.num_maps),
                        0,
                        NULL,
                        1,
                        "1:*", "");

  CCTKi_ParameterCreate("num_threads",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Number of threads per process",
                        "-1",
                        &(PRIVATE_CARPET_STRUCT.num_threads),
                        0,
                        NULL,
                        2,
                        "-1", "use system default, probably influenced by OMP_NUM_THREADS",
                        "1:*", "use this many threads");

  CCTKi_ParameterCreate("output_after_regridding",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Call OutputGH after regridding",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.output_after_regridding),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("output_initialise_timer_tree",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Output timing information in tree form to standard output for Initialise",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.output_initialise_timer_tree),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("output_internal_data",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Periodically print internal data to the screen for debugging purposes",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.output_internal_data),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("output_timer_tree_every",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Output timing information in tree form to standard output for Evolve every so many iterations",
                        "0",
                        &(PRIVATE_CARPET_STRUCT.output_timer_tree_every),
                        0,
                        NULL,
                        2,
                        "0", "don't report",
                        "1:*", "report every so many iterations");

  CCTKi_ParameterCreate("output_timers_every",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Print detailed statistics periodically",
                        "0",
                        &(PRIVATE_CARPET_STRUCT.output_timers_every),
                        0,
                        NULL,
                        3,
                        "-1", "don't report",
                        "0", "don't report",
                        "1:*", "report every so many iterations");

  CCTKi_ParameterCreate("output_xml_timer_tree",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Output timing information in tree form as XML",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.output_xml_timer_tree),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("poison_new_timelevels",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Try to catch uninitialised grid elements by setting new timelevels to values that will catch your attention",
                        "yes",
                        &(PRIVATE_CARPET_STRUCT.poison_new_timelevels),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("poison_value",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "UNUSED; use CarpetLib::poison_value instead",
                        "0",
                        &(PRIVATE_CARPET_STRUCT.poison_value),
                        0,
                        NULL,
                        1,
                        "*", "");

  CCTKi_ParameterCreate("print_grid_info",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Print information about the grids on regridding",
                        "yes",
                        &(PRIVATE_CARPET_STRUCT.print_grid_info),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("print_timestats_every",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Print interesting timing statistics periodically",
                        "0",
                        &(PRIVATE_CARPET_STRUCT.print_timestats_every),
                        0,
                        NULL,
                        3,
                        "-1", "don't report",
                        "0", "don't report",
                        "1:*", "report every so many iterations");

  CCTKi_ParameterCreate("processor_topology",
                        "Carpet",
                        "KEYWORD",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "How to determine the processor topology",
                        "automatic",
                        &(PRIVATE_CARPET_STRUCT.processor_topology),
                        0,
                        NULL,
                        6,
                        "manual", "Specified by processor_topology_*",
                        "along-z", "Split the region along the z direction only",
                        "along-dir", "Split the region along one direction only",
                        "automatic", "Choose the topology automatically",
                        "recursive", "Choose the topology automatically, using a different algorithm that may lead to better load balancing",
                        "balanced", "Choose the topology automatically, ensuring a maximum load imbalance");

  CCTKi_ParameterCreate("processor_topology_3d_x",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Number of processors in x-direction",
                        "1",
                        &(PRIVATE_CARPET_STRUCT.processor_topology_3d_x),
                        0,
                        NULL,
                        1,
                        "1:*", "must be positive");

  CCTKi_ParameterCreate("processor_topology_3d_y",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Number of processors in y-direction",
                        "1",
                        &(PRIVATE_CARPET_STRUCT.processor_topology_3d_y),
                        0,
                        NULL,
                        1,
                        "1:*", "must be positive");

  CCTKi_ParameterCreate("processor_topology_3d_z",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Number of processors in z-direction",
                        "1",
                        &(PRIVATE_CARPET_STRUCT.processor_topology_3d_z),
                        0,
                        NULL,
                        1,
                        "1:*", "must be positive");

  CCTKi_ParameterCreate("prolongate_initial_data",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Prolongate the refined regions during initial data generation",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.prolongate_initial_data),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("prolongation_order_space",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Order of prolongation operator in space",
                        "1",
                        &(PRIVATE_CARPET_STRUCT.prolongation_order_space),
                        0,
                        NULL,
                        1,
                        "0:*", "vertex centred orders must be odd");

  CCTKi_ParameterCreate("prolongation_order_time",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Order of prolongation operator in time",
                        "1",
                        &(PRIVATE_CARPET_STRUCT.prolongation_order_time),
                        0,
                        NULL,
                        1,
                        "0:*", "");

  CCTKi_ParameterCreate("prolongation_orders_space",
                        "Carpet",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Order of prolongation operator in space for each refinement level",
                        "",
                        &(PRIVATE_CARPET_STRUCT.prolongation_orders_space),
                        0,
                        NULL,
                        2,
                        "^$", "Use the value of prolongation_order_space",
                        "^[[:space:]]*\\[[[:space:]]*[[:digit:]]+[[:space:]]*(,[[:space:]]*[[:digit:]]+[[:space:]]*)*\\][[:space:]]*$", "[ <order>, ... ]");

  CCTKi_ParameterCreate("recompose_verbose",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Output debug information during recomposing",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.recompose_verbose),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("refine_timestep",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Correct Time::dtfac for spacings on finer grids",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.refine_timestep),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("refinement_centering",
                        "Carpet",
                        "KEYWORD",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Centering",
                        "vertex",
                        &(PRIVATE_CARPET_STRUCT.refinement_centering),
                        0,
                        NULL,
                        2,
                        "vertex", "use a vertex centred grid structure",
                        "cell", "use a cell centred grid structure");

  CCTKi_ParameterCreate("refinement_factor",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Refinement factor",
                        "2",
                        &(PRIVATE_CARPET_STRUCT.refinement_factor),
                        0,
                        NULL,
                        1,
                        "1:*", "must be positive");

  CCTKi_ParameterCreate("regrid_during_initialisation",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Regrid while initialising",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.regrid_during_initialisation),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("regrid_during_recovery",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Regrid while recovering",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.regrid_during_recovery),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("regrid_in_level_mode",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Regrid in level mode (instead of singlemap mode), enabling more efficient processor distributions when there are multiple maps",
                        "yes",
                        &(PRIVATE_CARPET_STRUCT.regrid_in_level_mode),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("same_number_of_components_on_each_process",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Ensure that each process has the same number of components, adding empty dummy components if necessary",
                        "yes",
                        &(PRIVATE_CARPET_STRUCT.same_number_of_components_on_each_process),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("schedule_barriers",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Insert barriers between scheduled items, so that timer statistics become more reliable (slows down execution)",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.schedule_barriers),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("set_cpu_affinity",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Set the process CPU affinity, overwriting the respective system setting",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.set_cpu_affinity),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("space_refinement_factors",
                        "Carpet",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Spatial refinement factors over the coarsest level",
                        "",
                        &(PRIVATE_CARPET_STRUCT.space_refinement_factors),
                        0,
                        NULL,
                        2,
                        "^$", "Use the value of refinement_factor",
                        "^[[:space:]]*\\[[[:space:]]*\\[[[:space:]]*[[:digit:]]+[[:space:]]*(,[[:space:]]*[[:digit:]]+[[:space:]]*)*\\][[:space:]]*(,[[:space:]]*\\[[[:space:]]*[[:digit:]]+[[:space:]]*(,[[:space:]]*[[:digit:]]+[[:space:]]*)*\\][[:space:]]*)*\\][[:space:]]*$", "[ [<ifact>,<jfact>,<kfact>], ... ]");

  CCTKi_ParameterCreate("split_components",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Split components onto processes; without this, one needs many components and few processes",
                        "yes",
                        &(PRIVATE_CARPET_STRUCT.split_components),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("split_direction",
                        "Carpet",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Direction in which the domain should be split (for processor_topology=along-dir)",
                        "2",
                        &(PRIVATE_CARPET_STRUCT.split_direction),
                        0,
                        NULL,
                        1,
                        "0:*", "0 for x, 1 for y, 2 for z, etc.");

  CCTKi_ParameterCreate("storage_verbose",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Display verbose storage information if veryverbose",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.storage_verbose),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("suppress_restriction",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Suppress the restriction operations.  This makes the coarser refinement levels independent of the finer ones.",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.suppress_restriction),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("sync_barriers",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Insert barriers before and after syncs, so that the sync timer is more reliable (slows down execution)",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.sync_barriers),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("sync_during_time_integration",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Synchronise during time integration, even when prolongation is switched off",
                        "yes",
                        &(PRIVATE_CARPET_STRUCT.sync_during_time_integration),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("time_interpolation_during_regridding",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Interpolate finer levels in time during regridding",
                        "yes",
                        &(PRIVATE_CARPET_STRUCT.time_interpolation_during_regridding),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("time_refinement_factors",
                        "Carpet",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Temporal refinement factors over the coarsest level",
                        "",
                        &(PRIVATE_CARPET_STRUCT.time_refinement_factors),
                        0,
                        NULL,
                        2,
                        "^$", "Use the value of refinement_factor",
                        "^[[:space:]]*\\[[[:space:]]*[[:digit:]]+[[:space:]]*(,[[:space:]]*[[:digit:]]+[[:space:]]*)*\\][[:space:]]*$", "[ <tfact>, ... ]");

  CCTKi_ParameterCreate("timer_file",
                        "Carpet",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "File name in which detailed timing statistics are collected",
                        "carpet-timing-statistics",
                        &(PRIVATE_CARPET_STRUCT.timer_file),
                        0,
                        NULL,
                        2,
                        "^$", "empty filename: no file output",
                        "^.+$", "file name");

  CCTKi_ParameterCreate("timing_average_window_minutes",
                        "Carpet",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Time interval (in wall time minutes) for calculating the current physics time per hour",
                        "10.0",
                        &(PRIVATE_CARPET_STRUCT.timing_average_window_minutes),
                        0,
                        NULL,
                        1,
                        "(0.0:*", "");

  CCTKi_ParameterCreate("use_buffer_zones",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Use buffer zones",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.use_buffer_zones),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("use_overlap_zones",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Use overlap zones",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.use_overlap_zones),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("use_tapered_grids",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Use tapered grids, avoiding time interpolation during evolution",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.use_tapered_grids),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("use_unusedpoints_mask",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Turn on storage and usage of 'unusedpoints_mask'",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.use_unusedpoints_mask),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("verbose",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Display more info on the screen",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.verbose),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("veryverbose",
                        "Carpet",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Display a lot of info on the screen",
                        "no",
                        &(PRIVATE_CARPET_STRUCT.veryverbose),
                        0,
                        NULL,
                        0);

  return 0;
}

int CCTKi_BindingsCarpetParameterExtensions(void);
int CCTKi_BindingsCarpetParameterExtensions(void)
{
  return 0;
}

