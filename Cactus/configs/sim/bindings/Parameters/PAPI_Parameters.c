/*@@
   @file    PAPI_Parameters.c
   @author  Automatically generated by CreateParameterBindings.pl
   @desc
            Creates/extends parameters for this thorn
   @enddesc
 @@*/


#include <stdio.h>
#include <stdlib.h>
#include <stdarg.h>

#include "cctk_Config.h"
#include "cctk_Constants.h"
#include "ParameterBindings.h"
#include "CParameterStructNames.h"

/* structure containing all private parameters of thorn PAPI */
struct
{
  const char * events_dcache;
  const char * events_flops;
  const char * events_icache;
  const char * events_ipc;
  const char * events_memory;
  CCTK_INT define_statistics_clocks;
  CCTK_INT dgemm_N;
  CCTK_INT out_every;
  CCTK_INT per_thread_statistics;
  CCTK_INT use_multiplexing;
  CCTK_INT verbose;
} PRIVATE_PAPI_STRUCT;


/* structure containing all restricted parameters of thorn PAPI */
struct
{
  int dummy_parameter;
} RESTRICTED_PAPI_STRUCT;


int CCTKi_BindingsCreatePAPIParameters(void);
int CCTKi_BindingsCreatePAPIParameters(void)
{
  CCTKi_ParameterCreate("define_statistics_clocks",
                        "PAPI",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Define multiple clocks for each PAPI counter, providing min/max/avg/sdv",
                        "no",
                        &(PRIVATE_PAPI_STRUCT.define_statistics_clocks),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("dgemm_N",
                        "PAPI",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Matrix size; mem = 32 N^2 bytes, cpu = 2 N^3 flop",
                        "1000",
                        &(PRIVATE_PAPI_STRUCT.dgemm_N),
                        0,
                        NULL,
                        1,
                        "1:*", "N=2000 requires 128 Mbyte and 16 Gflop; N=5000 requires 800 Mbyte and 250 Gflop");

  CCTKi_ParameterCreate("events_dcache",
                        "PAPI",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "PAPI events for data cache usage",
                        "PAPI_L1_DCA PAPI_L1_DCM PAPI_L2_DCA PAPI_L2_DCM PAPI_L3_DCA PAPI_L3_DCM",
                        &(PRIVATE_PAPI_STRUCT.events_dcache),
                        0,
                        NULL,
                        1,
                        "", "");

  CCTKi_ParameterCreate("events_flops",
                        "PAPI",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "PAPI events for flop/sec",
                        "PAPI_FP_OPS PAPI_DP_OPS PAPI_VEC_DP PAPI_TOT_CYC PAPI_REF_CYC SIMD_FP_256:PACKED_DOUBLE",
                        &(PRIVATE_PAPI_STRUCT.events_flops),
                        0,
                        NULL,
                        1,
                        "", "");

  CCTKi_ParameterCreate("events_icache",
                        "PAPI",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "PAPI events for instruction cache usage",
                        "PAPI_L1_ICA PAPI_L1_ICM PAPI_L2_ICA PAPI_L2_ICM PAPI_L3_ICA PAPI_L3_ICM",
                        &(PRIVATE_PAPI_STRUCT.events_icache),
                        0,
                        NULL,
                        1,
                        "", "");

  CCTKi_ParameterCreate("events_ipc",
                        "PAPI",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "PAPI events for instructions/cycle",
                        "PAPI_TOT_CYC PAPI_TOT_INS PAPI_FP_INS PAPI_INT_INS",
                        &(PRIVATE_PAPI_STRUCT.events_ipc),
                        0,
                        NULL,
                        1,
                        "", "");

  CCTKi_ParameterCreate("events_memory",
                        "PAPI",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "PAPI evens for memory accesses",
                        "PAPI_LD_INS PAPI_SR_INS PAPI_MEM_RCY PAPI_MEM_WCY",
                        &(PRIVATE_PAPI_STRUCT.events_memory),
                        0,
                        NULL,
                        1,
                        "", "");

  CCTKi_ParameterCreate("out_every",
                        "PAPI",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Output statistics every so many iterations",
                        "0",
                        &(PRIVATE_PAPI_STRUCT.out_every),
                        0,
                        NULL,
                        3,
                        "0", "after initial data and shutdown",
                        "1:*", "every so many iterations",
                        "-1", "no statistics output");

  CCTKi_ParameterCreate("per_thread_statistics",
                        "PAPI",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Collect statistics per thread (instead of per process)",
                        "yes",
                        &(PRIVATE_PAPI_STRUCT.per_thread_statistics),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("use_multiplexing",
                        "PAPI",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_RECOVER,
                        "Use multiplexing to gather more, but less accurate information",
                        "yes",
                        &(PRIVATE_PAPI_STRUCT.use_multiplexing),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("verbose",
                        "PAPI",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Output debug messages?",
                        "no",
                        &(PRIVATE_PAPI_STRUCT.verbose),
                        0,
                        NULL,
                        0);

  return 0;
}

int CCTKi_BindingsPAPIParameterExtensions(void);
int CCTKi_BindingsPAPIParameterExtensions(void)
{
  return 0;
}

