/*@@
   @file    TOVSolver_Parameters.c
   @author  Automatically generated by CreateParameterBindings.pl
   @desc
            Creates/extends parameters for this thorn
   @enddesc
 @@*/


#include <stdio.h>
#include <stdlib.h>
#include <stdarg.h>

#include "cctk_Config.h"
#include "cctk_Constants.h"
#include "ParameterBindings.h"
#include "CParameterStructNames.h"
#include "ParameterCRestrictedADMBASE.h"
#include "ParameterCRestrictedHYDROBASE.h"
#include "ParameterCRestrictedSTATICCONFORMAL.h"

/* structure containing all private parameters of thorn TOVSolver */
struct
{
  CCTK_REAL Pert_Amplitude[10];
  CCTK_REAL TOV_Gamma;
  CCTK_REAL TOV_K;
  CCTK_REAL TOV_Position_x[10];
  CCTK_REAL TOV_Position_y[10];
  CCTK_REAL TOV_Position_z[10];
  CCTK_REAL TOV_Rho_Central[10];
  CCTK_REAL TOV_Velocity_x[10];
  CCTK_REAL TOV_Velocity_y[10];
  CCTK_REAL TOV_Velocity_z[10];
  CCTK_REAL TOV_dr[10];
  const char * TOV_Combine_Method;
  const char * TOV_save_to_datafile;
  CCTK_INT Perturb[10];
  CCTK_INT TOV_Clear_Initial_Data;
  CCTK_INT TOV_Conformal_Flat_Three_Metric;
  CCTK_INT TOV_Enforce_Interpolation;
  CCTK_INT TOV_Fast_Interpolation;
  CCTK_INT TOV_Momentum_Psi_Power;
  CCTK_INT TOV_Num_Radial;
  CCTK_INT TOV_Num_TOVs;
  CCTK_INT TOV_Populate_Timelevels;
  CCTK_INT TOV_ProperPosition;
  CCTK_INT TOV_Solve_for_TOVs;
  CCTK_INT TOV_Use_Old_Initial_Data;
  CCTK_INT TOV_Use_Old_Matter_Initial_Data;
  CCTK_INT TOV_fake_evolution;
} PRIVATE_TOVSOLVER_STRUCT;


/* structure containing all restricted parameters of thorn TOVSolver */
struct
{
  int dummy_parameter;
} RESTRICTED_TOVSOLVER_STRUCT;


int CCTKi_BindingsCreateTOVSolverParameters(void);
int CCTKi_BindingsCreateTOVSolverParameters(void)
{
  CCTKi_ParameterCreate("Pert_Amplitude",
                        "TOVSolver",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Amplitude of perturbation",
                        "0.0",
                        (PRIVATE_TOVSOLVER_STRUCT.Pert_Amplitude),
                        10,
                        NULL,
                        1,
                        "*:*", "Anything");

  CCTKi_ParameterCreate("Perturb",
                        "TOVSolver",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Add density perturbation (you should solve the IVP if true)",
                        "no",
                        (PRIVATE_TOVSOLVER_STRUCT.Perturb),
                        10,
                        NULL,
                        0);

  CCTKi_ParameterCreate("TOV_Clear_Initial_Data",
                        "TOVSolver",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Clear initial data (spacetime)? Default is yes.",
                        "yes",
                        &(PRIVATE_TOVSOLVER_STRUCT.TOV_Clear_Initial_Data),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("TOV_Combine_Method",
                        "TOVSolver",
                        "KEYWORD",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Which combine method should be used.",
                        "average",
                        &(PRIVATE_TOVSOLVER_STRUCT.TOV_Combine_Method),
                        0,
                        NULL,
                        2,
                        "maximum", "Take the maximum of rho and gxx as clue for the rest as clue.",
                        "average", "Take the average of all available parts.");

  CCTKi_ParameterCreate("TOV_Conformal_Flat_Three_Metric",
                        "TOVSolver",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Use conformal factor to get the 3-metric flat. default is no",
                        "no",
                        &(PRIVATE_TOVSOLVER_STRUCT.TOV_Conformal_Flat_Three_Metric),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("TOV_Enforce_Interpolation",
                        "TOVSolver",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Enforce the interpolation of the data onto the Hydro GFs even without tov as specified initial data",
                        "no",
                        &(PRIVATE_TOVSOLVER_STRUCT.TOV_Enforce_Interpolation),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("TOV_Fast_Interpolation",
                        "TOVSolver",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Use faster interpolation algorithm? Default is yes.",
                        "yes",
                        &(PRIVATE_TOVSOLVER_STRUCT.TOV_Fast_Interpolation),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("TOV_Gamma",
                        "TOVSolver",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "The polytropic constant in P = K rho^Gamma",
                        "2.0",
                        &(PRIVATE_TOVSOLVER_STRUCT.TOV_Gamma),
                        0,
                        NULL,
                        1,
                        "1.0:", "The physical range at high Lorentz factors is [1,2], but otherwise higher values of gamma can also be used");

  CCTKi_ParameterCreate("TOV_K",
                        "TOVSolver",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "The polytropic constant in P = K rho^Gamma",
                        "100.0",
                        &(PRIVATE_TOVSOLVER_STRUCT.TOV_K),
                        0,
                        NULL,
                        1,
                        "(0.0:*", "Greater than 0");

  CCTKi_ParameterCreate("TOV_Momentum_Psi_Power",
                        "TOVSolver",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Power of Psi to be multiplied with J^i for Mom",
                        "0",
                        &(PRIVATE_TOVSOLVER_STRUCT.TOV_Momentum_Psi_Power),
                        0,
                        NULL,
                        1,
                        "*:*", "anything, 0 as default");

  CCTKi_ParameterCreate("TOV_Num_Radial",
                        "TOVSolver",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "The number of radial points for the ODE integration",
                        "100000",
                        &(PRIVATE_TOVSOLVER_STRUCT.TOV_Num_Radial),
                        0,
                        NULL,
                        1,
                        "1:*", "Greater than 0");

  CCTKi_ParameterCreate("TOV_Num_TOVs",
                        "TOVSolver",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "The number of TOVs",
                        "1",
                        &(PRIVATE_TOVSOLVER_STRUCT.TOV_Num_TOVs),
                        0,
                        NULL,
                        1,
                        "1:*", "Greater than 0");

  CCTKi_ParameterCreate("TOV_Populate_Timelevels",
                        "TOVSolver",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Populate that amount of timelevels",
                        "1",
                        &(PRIVATE_TOVSOLVER_STRUCT.TOV_Populate_Timelevels),
                        0,
                        NULL,
                        1,
                        "1:3", "1 (default) to 3");

  CCTKi_ParameterCreate("TOV_Position_x",
                        "TOVSolver",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Position of neutron star, x coordinate",
                        "0.0",
                        (PRIVATE_TOVSOLVER_STRUCT.TOV_Position_x),
                        10,
                        NULL,
                        1,
                        "*:*", "real");

  CCTKi_ParameterCreate("TOV_Position_y",
                        "TOVSolver",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Position of neutron star, y coordinate",
                        "0.0",
                        (PRIVATE_TOVSOLVER_STRUCT.TOV_Position_y),
                        10,
                        NULL,
                        1,
                        "*:*", "real");

  CCTKi_ParameterCreate("TOV_Position_z",
                        "TOVSolver",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Position of neutron star, z coordinate",
                        "0.0",
                        (PRIVATE_TOVSOLVER_STRUCT.TOV_Position_z),
                        10,
                        NULL,
                        1,
                        "*:*", "real");

  CCTKi_ParameterCreate("TOV_ProperPosition",
                        "TOVSolver",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "For use only with two NSs, atm only handles equal mass",
                        "no",
                        &(PRIVATE_TOVSOLVER_STRUCT.TOV_ProperPosition),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("TOV_Rho_Central",
                        "TOVSolver",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "The central density",
                        "1e-3",
                        (PRIVATE_TOVSOLVER_STRUCT.TOV_Rho_Central),
                        10,
                        NULL,
                        1,
                        "(0.0:*", "Must be positive");

  CCTKi_ParameterCreate("TOV_Solve_for_TOVs",
                        "TOVSolver",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Solve for TOVs even if no TOV initial data was requested?",
                        "3",
                        &(PRIVATE_TOVSOLVER_STRUCT.TOV_Solve_for_TOVs),
                        0,
                        NULL,
                        1,
                        "0:3", "depreciated in favour of TOVSolver::TOV_Enforce_Interpolation");

  CCTKi_ParameterCreate("TOV_Use_Old_Initial_Data",
                        "TOVSolver",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Take old initial data into account (spacetime)? Default is no.",
                        "no",
                        &(PRIVATE_TOVSOLVER_STRUCT.TOV_Use_Old_Initial_Data),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("TOV_Use_Old_Matter_Initial_Data",
                        "TOVSolver",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Use also old matter initial data? Default is no.",
                        "no",
                        &(PRIVATE_TOVSOLVER_STRUCT.TOV_Use_Old_Matter_Initial_Data),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("TOV_Velocity_x",
                        "TOVSolver",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "(fixed) Velocity of neutron star, x coordinate (caution!)",
                        "0.0",
                        (PRIVATE_TOVSOLVER_STRUCT.TOV_Velocity_x),
                        10,
                        NULL,
                        1,
                        "*:*", "real");

  CCTKi_ParameterCreate("TOV_Velocity_y",
                        "TOVSolver",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "(fixed) Velocity of neutron star, y coordinate (caution!)",
                        "0.0",
                        (PRIVATE_TOVSOLVER_STRUCT.TOV_Velocity_y),
                        10,
                        NULL,
                        1,
                        "*:*", "real");

  CCTKi_ParameterCreate("TOV_Velocity_z",
                        "TOVSolver",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "(fixed) Velocity of neutron star, z coordinate (caution!)",
                        "0.0",
                        (PRIVATE_TOVSOLVER_STRUCT.TOV_Velocity_z),
                        10,
                        NULL,
                        1,
                        "*:*", "real");

  CCTKi_ParameterCreate("TOV_dr",
                        "TOVSolver",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "The spacing in the radial direction on the 1d grid",
                        "5.e-4",
                        (PRIVATE_TOVSOLVER_STRUCT.TOV_dr),
                        10,
                        NULL,
                        1,
                        "(0.0:*", "Greater than 0");

  CCTKi_ParameterCreate("TOV_fake_evolution",
                        "TOVSolver",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Fake evolution by setting ID at every step",
                        "0",
                        &(PRIVATE_TOVSOLVER_STRUCT.TOV_fake_evolution),
                        0,
                        NULL,
                        1,
                        "*:*", "anything, 0 as off (default), everything else as on");

  CCTKi_ParameterCreate("TOV_save_to_datafile",
                        "TOVSolver",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_NEVER,
                        "Only save data to file and exit",
                        "",
                        &(PRIVATE_TOVSOLVER_STRUCT.TOV_save_to_datafile),
                        0,
                        NULL,
                        1,
                        ".*", "Any filename, not used if empty");

  return 0;
}

int CCTKi_BindingsTOVSolverParameterExtensions(void);
int CCTKi_BindingsTOVSolverParameterExtensions(void)
{
  CCTKi_ParameterAddRange("ADMBASE",
                          "initial_data",
                          "TOVSolver",
                          "tov",
                          "TOV star initial metric");

  CCTKi_ParameterAddRange("ADMBASE",
                          "initial_lapse",
                          "TOVSolver",
                          "tov",
                          "TOV star initial lapse; isotropic");

  CCTKi_ParameterAddRange("ADMBASE",
                          "initial_shift",
                          "TOVSolver",
                          "tov",
                          "TOV star initial shift");

  CCTKi_ParameterAddRange("HYDROBASE",
                          "initial_hydro",
                          "TOVSolver",
                          "tov",
                          "TOV star initial hydrobase variables");

  return 0;
}

