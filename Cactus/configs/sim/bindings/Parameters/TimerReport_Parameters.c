/*@@
   @file    TimerReport_Parameters.c
   @author  Automatically generated by CreateParameterBindings.pl
   @desc
            Creates/extends parameters for this thorn
   @enddesc
 @@*/


#include <stdio.h>
#include <stdlib.h>
#include <stdarg.h>

#include "cctk_Config.h"
#include "cctk_Constants.h"
#include "ParameterBindings.h"
#include "CParameterStructNames.h"
#include "ParameterCRestrictedIO.h"

/* structure containing all private parameters of thorn TimerReport */
struct
{
  const char * all_timers_clock;
  const char * out_filename;
  CCTK_INT before_checkpoint;
  CCTK_INT n_top_timers;
  CCTK_INT next;
  CCTK_INT out_at;
  CCTK_INT out_every;
  CCTK_INT output_all_timers;
  CCTK_INT output_all_timers_readable;
  CCTK_INT output_all_timers_together;
  CCTK_INT output_schedule_timers;
} PRIVATE_TIMERREPORT_STRUCT;


/* structure containing all restricted parameters of thorn TimerReport */
struct
{
  int dummy_parameter;
} RESTRICTED_TIMERREPORT_STRUCT;


int CCTKi_BindingsCreateTimerReportParameters(void);
int CCTKi_BindingsCreateTimerReportParameters(void)
{
  CCTKi_ParameterCreate("all_timers_clock",
                        "TimerReport",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Which clock to use for the all timers output",
                        "gettimeofday",
                        &(PRIVATE_TIMERREPORT_STRUCT.all_timers_clock),
                        0,
                        NULL,
                        1,
                        ".*", "any clock name allowed");

  CCTKi_ParameterCreate("before_checkpoint",
                        "TimerReport",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Before a checkpoint",
                        "no",
                        &(PRIVATE_TIMERREPORT_STRUCT.before_checkpoint),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("n_top_timers",
                        "TimerReport",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "How many timers to include in the top timer report",
                        "0",
                        &(PRIVATE_TIMERREPORT_STRUCT.n_top_timers),
                        0,
                        NULL,
                        2,
                        "0", "Do not print the report",
                        "1:*", "Any number of timers");

  CCTKi_ParameterCreate("next",
                        "TimerReport",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "On next iteration",
                        "no",
                        &(PRIVATE_TIMERREPORT_STRUCT.next),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("out_at",
                        "TimerReport",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Output timer information at a given iteration",
                        "-1",
                        &(PRIVATE_TIMERREPORT_STRUCT.out_at),
                        0,
                        NULL,
                        2,
                        "-1", "Do not output at specific iteration (default)",
                        "0:*", "At this iteration");

  CCTKi_ParameterCreate("out_every",
                        "TimerReport",
                        "INT",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "How often to output timer report to screen",
                        "0",
                        &(PRIVATE_TIMERREPORT_STRUCT.out_every),
                        0,
                        NULL,
                        2,
                        "0", "No periodic output (default)",
                        "1:*", "Every so many iterations");

  CCTKi_ParameterCreate("out_filename",
                        "TimerReport",
                        "STRING",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "File name for timer reports",
                        "",
                        &(PRIVATE_TIMERREPORT_STRUCT.out_filename),
                        0,
                        NULL,
                        2,
                        "^$", "empty filename: print to stdout",
                        "^.+$", "otherwise: print to that file");

  CCTKi_ParameterCreate("output_all_timers",
                        "TimerReport",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Output one file per processor containing all the Cactus timers",
                        "no",
                        &(PRIVATE_TIMERREPORT_STRUCT.output_all_timers),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("output_all_timers_readable",
                        "TimerReport",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Output one file containing information about all the Cactus timers (average, minimum, and maximum over all processors), in a format that is readable by humans",
                        "no",
                        &(PRIVATE_TIMERREPORT_STRUCT.output_all_timers_readable),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("output_all_timers_together",
                        "TimerReport",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Output three files (formats .txt, .csv, and .tsv), containing information about all the Cactus timers (average, minimum, and maximum over all processors)",
                        "no",
                        &(PRIVATE_TIMERREPORT_STRUCT.output_all_timers_together),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("output_schedule_timers",
                        "TimerReport",
                        "BOOLEAN",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Output the schedule timers in a formatted tabular format",
                        "yes",
                        &(PRIVATE_TIMERREPORT_STRUCT.output_schedule_timers),
                        0,
                        NULL,
                        0);

  return 0;
}

int CCTKi_BindingsTimerReportParameterExtensions(void);
int CCTKi_BindingsTimerReportParameterExtensions(void)
{
  return 0;
}

