/*@@
   @file    IllinoisGRMHD_Parameters.c
   @author  Automatically generated by CreateParameterBindings.pl
   @desc
            Creates/extends parameters for this thorn
   @enddesc
 @@*/


#include <stdio.h>
#include <stdlib.h>
#include <stdarg.h>

#include "cctk_Config.h"
#include "cctk_Constants.h"
#include "ParameterBindings.h"
#include "CParameterStructNames.h"
#include "ParameterCRestrictedADMBASE.h"
#include "ParameterCRestrictedMETHODOFLINES.h"

/* structure containing all private parameters of thorn IllinoisGRMHD */
struct
{
  CCTK_REAL damp_lorenz;
} PRIVATE_ILLINOISGRMHD_STRUCT;


/* structure containing all restricted parameters of thorn IllinoisGRMHD */
struct
{
  CCTK_REAL GAMMA_SPEED_LIMIT;
  CCTK_REAL K_poly;
  CCTK_REAL Psi6threshold;
  CCTK_REAL Sym_Bz;
  CCTK_REAL gamma_th;
  CCTK_REAL rho_b_atm;
  CCTK_REAL rho_b_max;
  CCTK_REAL tau_atm;
  const char * EM_BC;
  const char * Matter_BC;
  const char * Symmetry;
  CCTK_INT IllinoisGRMHD_MaxNumEvolvedVars;
  CCTK_INT conserv_to_prims_debug;
  CCTK_INT neos;
  CCTK_INT update_Tmunu;
} RESTRICTED_ILLINOISGRMHD_STRUCT;


int CCTKi_BindingsCreateIllinoisGRMHDParameters(void);
int CCTKi_BindingsCreateIllinoisGRMHDParameters(void)
{
  CCTKi_ParameterCreate("EM_BC",
                        "IllinoisGRMHD",
                        "KEYWORD",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "EM field boundary condition",
                        "copy",
                        &(RESTRICTED_ILLINOISGRMHD_STRUCT.EM_BC),
                        0,
                        NULL,
                        2,
                        "copy", "Copy data from nearest boundary point",
                        "frozen", "Frozen boundaries");

  CCTKi_ParameterCreate("GAMMA_SPEED_LIMIT",
                        "IllinoisGRMHD",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "Maximum relativistic gamma factor.",
                        "10.0",
                        &(RESTRICTED_ILLINOISGRMHD_STRUCT.GAMMA_SPEED_LIMIT),
                        0,
                        NULL,
                        1,
                        "1:*", "Positive > 1, though you'll likely have troubles far above 10.");

  CCTKi_ParameterCreate("IllinoisGRMHD_MaxNumEvolvedVars",
                        "IllinoisGRMHD",
                        "INT",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "The maximum number of evolved variables used by BSSN",
                        "9",
                        &(RESTRICTED_ILLINOISGRMHD_STRUCT.IllinoisGRMHD_MaxNumEvolvedVars),
                        0,
                        NULL,
                        1,
                        "9:9", "Just 9: rho_star,tau,mhd_st_x,mhd_st_y,mhd_st_z,Ax,Ay,Az, and psi6phi");

  CCTKi_ParameterCreate("K_poly",
                        "IllinoisGRMHD",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "initial polytropic constant",
                        "1.0",
                        &(RESTRICTED_ILLINOISGRMHD_STRUCT.K_poly),
                        0,
                        NULL,
                        1,
                        "0:*", "Positive");

  CCTKi_ParameterCreate("Matter_BC",
                        "IllinoisGRMHD",
                        "KEYWORD",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "Chosen Matter boundary condition",
                        "outflow",
                        &(RESTRICTED_ILLINOISGRMHD_STRUCT.Matter_BC),
                        0,
                        NULL,
                        2,
                        "outflow", "Outflow boundary conditions",
                        "frozen", "Frozen boundaries");

  CCTKi_ParameterCreate("Psi6threshold",
                        "IllinoisGRMHD",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_ALWAYS,
                        "Where Psi^6 > Psi6threshold, we assume we're inside the horizon in the primitives solver, and certain limits are relaxed or imposed",
                        "1e100",
                        &(RESTRICTED_ILLINOISGRMHD_STRUCT.Psi6threshold),
                        0,
                        NULL,
                        1,
                        "*:*", "Can set to anything");

  CCTKi_ParameterCreate("Sym_Bz",
                        "IllinoisGRMHD",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "Symmetry parameter across z axis for magnetic fields = +/- 1",
                        "1.0",
                        &(RESTRICTED_ILLINOISGRMHD_STRUCT.Sym_Bz),
                        0,
                        NULL,
                        1,
                        "-1.0:1.0", "Set to +1 or -1.");

  CCTKi_ParameterCreate("Symmetry",
                        "IllinoisGRMHD",
                        "KEYWORD",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "Symmetry: 0=NOSYMM, 1=EQUATORIAL. FIXME: Use ET symmetry interface. PROBLEM: ET does not support staggered gridfunctions",
                        "none",
                        &(RESTRICTED_ILLINOISGRMHD_STRUCT.Symmetry),
                        0,
                        NULL,
                        2,
                        "none", "no symmetry, full 3d domain",
                        "equatorial", "NOT READY FOR PRIME TIME: reflection across z=0");

  CCTKi_ParameterCreate("conserv_to_prims_debug",
                        "IllinoisGRMHD",
                        "INT",
                        "RESTRICTED",
                        CCTK_STEERABLE_ALWAYS,
                        "0: no, 1: yes",
                        "0",
                        &(RESTRICTED_ILLINOISGRMHD_STRUCT.conserv_to_prims_debug),
                        0,
                        NULL,
                        1,
                        "0:1", "zero (no) or one (yes)");

  CCTKi_ParameterCreate("gamma_th",
                        "IllinoisGRMHD",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "thermal gamma parameter",
                        "-1",
                        &(RESTRICTED_ILLINOISGRMHD_STRUCT.gamma_th),
                        0,
                        NULL,
                        2,
                        "0:*", "Physical values",
                        "-1", "forbidden value to make sure it is explicitly set in the parfile");

  CCTKi_ParameterCreate("neos",
                        "IllinoisGRMHD",
                        "INT",
                        "RESTRICTED",
                        CCTK_STEERABLE_NEVER,
                        "number of parameters in EOS table. If you want to increase from the default max value, you MUST also set eos_params_arrays1 and eos_params_arrays2 in interface.ccl to be consistent!",
                        "1",
                        &(RESTRICTED_ILLINOISGRMHD_STRUCT.neos),
                        0,
                        NULL,
                        1,
                        "1:10", "Any integer between 1 and 10");

  CCTKi_ParameterCreate("rho_b_atm",
                        "IllinoisGRMHD",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_ALWAYS,
                        "Floor value on the baryonic rest mass density rho_b (atmosphere). Given the variety of systems this code may encounter, there *is no reasonable default*. Your run will die unless you override this default value in your initial data thorn.",
                        "1e200",
                        &(RESTRICTED_ILLINOISGRMHD_STRUCT.rho_b_atm),
                        0,
                        NULL,
                        1,
                        "*:*", "Allow for negative values.  This enables us to debug the code and verify if rho_b_atm is properly set.");

  CCTKi_ParameterCreate("rho_b_max",
                        "IllinoisGRMHD",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_ALWAYS,
                        "Ceiling value on the baryonic rest mass density rho_b. The enormous value effectively disables this ceiling by default. It can be quite useful after a black hole has accreted a lot of mass, leading to enormous densities inside the BH. To enable this trick, set rho_b_max in your initial data thorn! You are welcome to change this parameter mid-run (after restarting from a checkpoint).",
                        "1e300",
                        &(RESTRICTED_ILLINOISGRMHD_STRUCT.rho_b_max),
                        0,
                        NULL,
                        1,
                        "0:*", "Note that you will have problems unless rho_b_atm<rho_b_max");

  CCTKi_ParameterCreate("tau_atm",
                        "IllinoisGRMHD",
                        "REAL",
                        "RESTRICTED",
                        CCTK_STEERABLE_ALWAYS,
                        "Floor value on the energy variable tau (cf. tau_stildefix_enable). Given the variety of systems this code may encounter, there *is no reasonable default*. Effectively the current (enormous) value should disable the tau_atm floor. Please set this in your initial data thorn, and reset at will during evolutions.",
                        "1e100",
                        &(RESTRICTED_ILLINOISGRMHD_STRUCT.tau_atm),
                        0,
                        NULL,
                        1,
                        "0:*", "Positive");

  CCTKi_ParameterCreate("update_Tmunu",
                        "IllinoisGRMHD",
                        "BOOLEAN",
                        "RESTRICTED",
                        CCTK_STEERABLE_ALWAYS,
                        "Update Tmunu, for RHS of Einstein's equations?",
                        "yes",
                        &(RESTRICTED_ILLINOISGRMHD_STRUCT.update_Tmunu),
                        0,
                        NULL,
                        0);

  CCTKi_ParameterCreate("damp_lorenz",
                        "IllinoisGRMHD",
                        "REAL",
                        "PRIVATE",
                        CCTK_STEERABLE_ALWAYS,
                        "Damping factor for Lorenz gauge. Has units of 1/length = 1/M. Try using the same value as used for the eta parameter, or smaller! Brian tried 0.1 with ADM mass of 1.",
                        "0.0",
                        &(PRIVATE_ILLINOISGRMHD_STRUCT.damp_lorenz),
                        0,
                        NULL,
                        1,
                        "*:*", "any real");

  return 0;
}

int CCTKi_BindingsIllinoisGRMHDParameterExtensions(void);
int CCTKi_BindingsIllinoisGRMHDParameterExtensions(void)
{
  CCTKi_ParameterAccumulatorBase("IllinoisGRMHD",
                          "IllinoisGRMHD_MaxNumEvolvedVars",
                          "MethodofLines",
                          "MoL_Num_Evolved_Vars");

  return 0;
}

